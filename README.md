<div> 
   <h1 align="center">
      bilicoin 自动投币工具 <span class="bg-level" style="background-position: -21px -224px; background: url(data:image/png;base64,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) no-repeat; display: inline-block; margin-right: 10px; width: 30px; height: 20px;"></span>
      <i class="level l6"></i>
   </h1>
</div>


## 说明

1. 自动完成B站50经验每日任务，帮助快速升级
2. 随机选取视频投币
3. 每天23点50分（默认）左右，假设已投2个币，那么程序会再投3个
4. 支持[方糖](https://sct.ftqq.com/ "ftqq")进行微信通知
5. 支持 `QRCode` 登录，无需手动粘贴 `Cookie`
6. 支持多用户处理
7. [demo 查看](https://120.77.33.188:9090/version "Demo")  
   [QR demo https](https://120.77.33.188/bilicoin/)  
   [QR demo http](http://120.77.33.188/bilicoin/)  
8. 银瓜子转硬币（需要手动在用户的 `Tasks` 数组中添加 `silver-2-coin`）  
9. 有空就更新

## 获取工具

项目从 [Release](https://github.com/r3inbowari/bilicoin/releases "Releases Download") 中下载或自行编译

1. 编译方法
    ```
    git clone https://github.com/r3inbowari/bilicoin.git
    cd bilicoin
    ./build.bat or ./build.sh
    ```

## 使用方法

1. 命令行输入下面内容，开始服务运行

    ```
    ./bilicoin_linux_amd64 -a
    ```

2. 基本请求  
   详细的请求和响应格式可以看[这里](https://docs.apipost.cn/view/8ab6ae6778a3b405 "API DOC")

    ```
    获得所有用户
    GET /users
    eg: https://120.77.33.188:9090/users
    
    登录请求
    POST /user
    eg: https://120.77.33.188:9090/user
    响应中返回一个oauth key  
    3835a3c053dcda56c0c0136110f69ec9  
    注意：二维码的数据格式是 https://passport.bilibili.com/qrcode/h5/login?oauthKey=<oauth key>
    比如 https://passport.bilibili.com/qrcode/h5/login?oauthKey=3835a3c053dcda56c0c0136110f69ec9
    
    轮询是否登陆成功(带上登录请求中获取的oauth key字段)
    POST /user?oauth=3835a3c053dcda56c0c0136110f69ec9
    eg: https://120.77.33.188:9090/user?oauth=3835a3c053dcda56c0c0136110f69ec9
    
    试图删除一个UID
    DETETE/user?uid=3077202
    
    试图修改UID的Cron表达式
    GET /{id}/cron?spec=cron表达式
    
    试图修改UID的FTQQ的key或者是开关
    GET /{id}/ft?key=方糖key&sw=开关
    ```

## 其它 Command

1. 使用命令行通过二维码登录一个用户   

    ```
    ./bilicoin_linux_amd64 -n
    ```
    ![qrcode](https://user-images.githubusercontent.com/30739857/148712500-16285b3e-7f92-4e46-932f-ebca281e3e12.png)   
 
2. 查询当前配置文件中所有的 `UID`:

    ```
    ./bilicoin_linux_amd64 -l
    ```

3. 从配置文件中删除指定的 `UID`:

    ```
    ./bilicoin_linux_amd64 -d <用户ID>
    // example: 
    // 1. 尝试删除 UID 为 30772 的登录信息
    ./bilicoin_linux_amd64 -d 30722
    ```

4. 配置方糖微信通知[可选]

    ```
    ./bilicoin_linux_amd64 -u <用户ID> -f <方糖 SecretKey>
    // example: 
    // 1. 尝试为用户添加方糖key
    ./bilicoin_linux_amd64 -u 30772 -f 933330 SCUxxxxxTe034cxxxxx...
    ```

5. 修改指定UID的Cron表达式(默认是30 50 23 * * ?)

   ```
   ./bilicoin_linux_amd64 -u <用户ID> -c [Cron Spec]
   // 注意：cron表达式的空格要用逗号替换
   // example: 
   // 1. 修改30772的cron为 0 10 20 * * ?
   ./bilicoin_linux_amd64 -u 30772 -c 0,10,20,*,*,?
   ```

## 使用 Docker 构建

你也可以使用 `docker` 进行部署，通过使用http请求进行控制。

1. 构建镜像

    ```
    // build image
    docker build -t r3inbowari/bilicoin:v1.1.0 .

    // prune dangling image: builder
    docker image prune --filter label=stage=builder
    ```

2. 如果不想构建的话可以直接拉取已经构建好的镜像 [linux/amd64](https://hub.docker.com/repository/docker/r3inbowari/bilicoin "DockerHub Page")

    ```
    docker pull r3inbowari/bilicoin:v1.1.0
    ```

3. 直接运行即可

    ```
    // run
    docker run \
    --name bilicoin \
    -p 9090:9090 \
    -itd --restart=always \
    r3inbowari/bilicoin:v1.1.0
   
    // 挂载外部config文件
    docker run \
    --name bilicoin \
    -p 9090:9090 \
    -itd --restart=always \
    -v $PWD/bili.json:/app/bili.json \
    r3inbowari/bilicoin:v1.1.0
   
    ```

4. 浏览器打开地址验证是否开启

   ```
   GET http://localhost:9090/version
   ```

## 其他问题

1. `bili.json` 中的 `canvas_finger` 是 `canvas-base64` 生成的随机数值, 可以选择修改，不影响使用。
2. 多用户投币重复使用二维码方式登录即可。
3. 重复登录同一个账号时，该账号的上一次登录信息将会被覆盖。
4. 支持mt76xx嵌入式路由
   ![mipsle](https://user-images.githubusercontent.com/30739857/112732835-5717f480-8f77-11eb-9ba1-148b308ed9d3.png)
